---
title: "Nix macOS Starter: Deklarativní vývojové prostředí s Mise"
description: "Startovací Nix konfigurace pro macOS s nix-darwin, home-manager a mise."
date: "2025-07-08"
tags: [open-source]
---

V sobotu jsem se rozhodl naučit se Nix. Po hodinách práce jsem dal dohromady tuto konfiguraci. Díky patří mému kamarádovi [Ethan Niser](https://github.com/ethanniser), který mi dal nápad a jehož konfigurací jsem začínal.

Nastavení nového Macu pro vývoj bolí. Nainstalujete Homebrew, Node přes nvm, Python přes pyenv, nastavíte shell, jednotlivě nainstalujete GUI aplikace a při přechodu na jiný stroj jen doufáte, že si na všechno vzpomenete.

Nix dělá konfiguraci celého systému deklarativní a reprodukovatelnou, ale většina konfigurací na internetu je pro začátečníky příliš složitá nebo předpokládá znalost Linuxu.

[nix-macos-starter](https://github.com/bgub/nix-macos-starter) je začátečnicky přívětivá Nix konfigurace, která zahrnuje vývojové nástroje (mise pro správu runtime, CLI nástroje, formátovače), GUI aplikace přes Homebrew a systémovou konfiguraci s rozumnými výchozími nastaveními.

Stačí nahradit pár zástupných hodnot, spustit jeden příkaz a máte plně nakonfigurované vývojové prostředí.

## Instalace

1. **Nainstalujte Nix** pomocí [instalátoru od Determinate Systems](https://docs.determinate.systems/#products). Stáhněte si grafický instalátor pro macOS a po instalaci restartujte terminál.

2. **Nainstalujte Homebrew** z [brew.sh](https://brew.sh) pro aplikace s GUI.

3. **Naklonujte a nakonfigurujte**:

   ```bash
   git clone https://github.com/bgub/nix-macos-starter ~/.config/nix
   cd ~/.config/nix
   ```

4. **Pro Macy s Intelem**: Změňte „aarch64-darwin“ na „x86_64-darwin“ v `flake.nix` na řádku 28.

5. **Nahraďte zástupné hodnoty** v těchto souborech:

   - `modules/git.nix`: `YOUR_NAME`, `YOUR_EMAIL`, `YOUR_USERNAME`
   - `modules/home-manager.nix`: `YOUR_USERNAME`
   - `platforms/darwin.nix`: `YOUR_USERNAME` (vyskytuje se 3×)
   - `hosts/my-macbook/configuration.nix`: `YOUR_USERNAME`

6. **Sestavte a přepněte**:
   ```bash
   darwin-rebuild switch --flake .#my-macbook
   ```

Po úvodním nastavení použijte alias `nix-switch` k opětovnému sestavení konfigurace.

## Přizpůsobení

- **Přidání CLI nástrojů**: Upravte pole `packages` v `modules/home-manager.nix`
- **Přidání GUI aplikací**: Upravte pole `casks` v `modules/homebrew-common.nix`
- **Přidání vývojářských nástrojů**: Přidejte `${pkgs.mise}/bin/mise use --global tool@version` do aktivačního skriptu v `modules/home-manager.nix`
- **Konfigurace specifická pro konkrétní stroj**: Použijte `hosts/my-macbook/configuration.nix` pro balíčky a nastavení specifická pro daný počítač

---

**Repozitář**: [github.com/bgub/nix-macos-starter](https://github.com/bgub/nix-macos-starter)