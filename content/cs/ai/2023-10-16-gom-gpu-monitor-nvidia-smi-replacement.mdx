---
title: "Představuji GOM: monitorování GPU napříč kontejnery"
description: Vydal jsem GOM, CLI nástroj pro monitorování využití GPU napříč kontejnery Dockeru.
date: "2023-10-16"
tags: [ml/ai, open-source]
---

## Stručně

`gom` je zkratka pro GPU Output Monitor. Je to pip balíček, který nabízí CLI pro sledování využití GPU. Představte si ho jako `nvidia-smi`, ale rychlejší a minimalističtější. A má i bonusovou funkci: **v prostředích, kde kontejnery Dockeru používají GPU, rozpadne využití podle jednotlivých kontejnerů**! (Nebojte, funguje i v prostředích bez Dockeru a dokonce i uvnitř dockerových kontejnerů.)

_Svému kolegovi [Vin](https://howe.vin/) vděčím za inspiraci k tomuto projektu. Pomocí GPT‑4 vytvořil úvodní prototyp v Bashi, ale kvůli chybám a problémům s výkonem jsem to musel celé přepsat od základu._

## Pokyny

1. Spusťte `pip3 install gom`
2. Podle vaší verze CUDA nainstalujte odpovídající verzi `pynvml`
3. Spusťte `gom show` (pro jednorázové zobrazení využití) nebo `gom watch` (pro průběžné sledování využití, aktualizované zhruba každou sekundu)

## Porovnání `gom` a `nvidia-smi`

Myslím, že výsledky mluví samy za sebe :). Tento první snímek obrazovky je výsledkem spuštění `gom watch`. Je vidět, že čtyři různé kontejnery Dockeru — `r0`, `r1`, `r2` a `r3` — každý výrazně využívají GPU. Je tu také drobné využití všech GPU, které nepochází z žádného kontejneru.

![výstup ze spuštění příkazu `gom watch`](/blog-images/gom-watch.png)

Tento druhý snímek obrazovky je výsledkem spuštění `nvidia-smi`. Je složitý a zbytečně upovídaný. Přestože zabírá víc místa než `gom`, zvládne zobrazit informace jen pro 8 GPU!

![výstup ze spuštění příkazu `nvidia-smi`](/blog-images/nvidia-smi.png)

## Závěr

`gom` jsem vytvořil, protože jsem chtěl sledovat využití GPU napříč různými dockerovými kontejnery. Při úlohách z oblasti ML ho používám často, protože je rychlý a výstup se vejde i na malý terminál. Doufám, že vám bude užitečný. Pokud máte nějaké návrhy, klidně založte issue v [repozitáři na GitHubu](https://github.com/bgub/gom).