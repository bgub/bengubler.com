---
title: "Знакомьтесь: GOM — мониторинг GPU в контейнерах"
description: Я выпустил GOM — CLI‑инструмент для мониторинга использования GPU в Docker‑контейнерах.
date: "2023-10-16"
tags: [ml/ai, open-source]
---

## Если коротко

`gom` — это GPU Output Monitor. Пакет для pip, который предоставляет CLI для мониторинга загрузки GPU. Представьте его как `nvidia-smi`, только быстрее и минималистичнее. Плюс есть бонус: **в окружениях, где Docker‑контейнеры используют GPU, он показывает использование по каждому контейнеру**! (Не волнуйтесь, он также работает без Docker и даже внутри Docker‑контейнеров.)

_Я обязан идеей этому проекту своему коллеге [Vin](https://howe.vin/). Он с помощью GPT‑4 сделал первоначальный прототип на Bash, но из‑за багов и проблем с производительностью мне пришлось переписать всё с нуля._

## Инструкции

1. Выполните `pip3 install gom`
2. В зависимости от вашей версии CUDA установите подходящую версию `pynvml`
3. Запустите `gom show` (чтобы один раз посмотреть текущее использование) или `gom watch` (для непрерывного мониторинга, обновляется примерно раз в секунду)

## Сравнение `gom` и `nvidia-smi`

Думаю, результаты говорят сами за себя :). Первый скриншот — результат выполнения `gom watch`. Видно, что четыре разных контейнера Docker — `r0`, `r1`, `r2` и `r3` — каждый активно используют GPU. Также заметна небольшая загрузка всех GPU, не связанная ни с одним контейнером.

![output of running `gom watch` command](/blog-images/gom-watch.png)

Второй скриншот — результат выполнения `nvidia-smi`. Он перегружен и излишне многословен. Занимая больше места, чем `gom`, он умудряется показать информацию лишь по 8 GPU!

![output of running `nvidia-smi` command](/blog-images/nvidia-smi.png)

## Заключение

Я создал `gom`, потому что хотел мониторить использование GPU в разных контейнерах Docker. Часто применяю его при выполнении ML‑задач: он быстрый, а вывод умещается даже в небольшом терминале. Надеюсь, он окажется полезен и вам. Если у вас есть предложения, смело открывайте issue в [репозитории на GitHub](https://github.com/bgub/gom).