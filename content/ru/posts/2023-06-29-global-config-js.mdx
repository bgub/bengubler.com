---
title: Один конфиг‑файл, чтобы править всеми
description: У JavaScript‑инструментов слишком много конфигов. Давайте объединим их.
date: "2023-06-29"
tags: [open-source]
was_llm_utilized: slightly
---

Современная веб‑разработка подразумевает работу с несколькими JS‑инструментами и фреймворками, каждому из которых нужны свои файлы конфигурации. Управление такими файлами, как `.eslintrc`, `next.config.js` и `tailwind.config.js`, может быть обременительным и отнимать много времени. В этом посте я рассмотрю идею объединения этих конфигураций в один файл `global.config.js`, чтобы централизовать настройки проекта и сократить отвлекающие факторы.

## Конфигурационные файлы повсюду

Пока я пишу этот пост, в корне моего проекта лежат `.eslintrc.json`, `next.config.js`, `postcss.config.js`, `tailwind.config.js` и `tsconfig.json`. Хотя моя конфигурация почти «из коробки», а каждый файл короче 30 строк, они занимают драгоценное место в боковой панели VSCode и отвлекают от главного — исходного кода.

Мой случай далеко не уникален. В некоторых проектах конфигурационных файлов куда больше. Представьте, насколько может захламиться проект, если добавить `.babelrc`, `prettier.config.js`, `jest.config.js`, `cypress.json` и т. д.

## Решение: `global.config.js`

Хочу предложить простое решение: собрать все конфигурации в один файл `global.config.js`. Конфигурация для каждого инструмента будет храниться в экспортируемом объекте под ключом с названием соответствующего npm-пакета.

Проекты всё равно должны поддерживать использование отдельных файлов конфигурации для случаев, когда конфигурация объёмная и сложная (например, `tsconfig.json`), но сначала им следует проверить, существует ли `global.config.js` и есть ли в нём конфигурация для их инструмента.

Вот как может выглядеть простой `global.config.js`:

```js
module.exports = {
  eslint: {
    extends: ["next/core-web-vitals"]
  },
  postcss: {
    plugins: {
      tailwindcss: {},
      autoprefixer: {}
    }
  },
  tailwindcss: {
    content: ["./src/pages/**/*.{js,ts,jsx,tsx,mdx}"],
    theme: {
      extend: {
        backgroundImage: {
          "gradient-radial": "radial-gradient(var(--tw-gradient-stops))"
        }
      }
    },
    plugins: [require("@tailwindcss/typography")]
  }
}
```


## А как насчёт типов?

Автодополнение по типам для `global.config.js` можно легко включить, добавив определения типов в комментарии — как это уже делают Tailwind и Next.js в своих конфигурационных файлах.

```js
module.exports = {
  // ...

  /** @type {import('tailwindcss').Config} */
  tailwindcss: {
    content: ["./src/pages/**/*.{js,ts,jsx,tsx,mdx}"],
    theme: {
      extend: {
        backgroundImage: {
          "gradient-radial": "radial-gradient(var(--tw-gradient-stops))"
        }
      }
    },
    plugins: [require("@tailwindcss/typography")]
  }
}
```


## Следующие шаги

Если вам нравится эта идея, отправьте PR в ваш любимый инструмент сборки! Если нет — расскажите мне почему в Twitter. Или не рассказывайте и просто продолжайте жить своей жизнью.