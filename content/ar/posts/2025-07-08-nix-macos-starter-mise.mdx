---
title: "Nix للمبتدئين على macOS: إعداد تطوير تصريحي مع Mise"
description: "تهيئة Nix أولية لـ macOS باستخدام nix-darwin وhome-manager وmise."
date: "2025-07-08"
tags: [open-source]
---

قررت أن أتعلّم Nix يوم السبت. بعد ساعات من العمل، خرجت بهذا الإعداد. تحية لصديقي [Ethan Niser](https://github.com/ethanniser) الذي ألهمني الفكرة وكانت تهيئته نقطة انطلاقي.

إعداد جهاز Mac جديد للتطوير عملية مُرهِقة: تثبّت Homebrew، وNode عبر nvm، وPython عبر pyenv، وتضبط الصدفة، وتثبّت تطبيقات الواجهة الرسومية واحدًا تلو الآخر، وتؤمل أن تتذكر كل شيء عند الانتقال إلى جهاز جديد.

يجعل Nix تهيئة نظامك بالكامل تصريحية وقابلة لإعادة الإنتاج، لكن معظم التهيئات المتاحة على الإنترنت معقّدة جدًا للمبتدئين أو تفترض معرفة مسبقة بـ Linux.

[nix-macos-starter](https://github.com/bgub/nix-macos-starter) تهيئة Nix مناسبة للمبتدئين تتضمن أدوات التطوير (mise لإدارة البيئات التشغيلية، وأدوات سطر الأوامر، وأدوات التنسيق)، وتطبيقات واجهة رسومية عبر Homebrew، وتهيئة للنظام بإعدادات افتراضية معقولة.

استبدل بضع العناصر النائبة، وشغّل أمرًا واحدًا، وستحصل على بيئة تطوير مُعَدّة بالكامل.

## التثبيت

1. **ثبّت Nix** باستخدام [مُثبّت Determinate Systems](https://docs.determinate.systems/#products). نزّل المُثبّت الرسومي لنظام macOS وأعد تشغيل الطرفية بعد التثبيت.

2. **ثبّت Homebrew** من [brew.sh](https://brew.sh) لتطبيقات الواجهة الرسومية.

3. **استنسخ وأعِد الضبط**:

   ```bash
   git clone https://github.com/bgub/nix-macos-starter ~/.config/nix
   cd ~/.config/nix
   ```

4. **لأجهزة Intel Mac**: غيّر "aarch64-darwin" إلى "x86_64-darwin" في `flake.nix` عند السطر 28.

5. **استبدل الحقول المؤقتة** في هذه الملفات:

   - `modules/git.nix`: `YOUR_NAME`, `YOUR_EMAIL`, `YOUR_USERNAME`
   - `modules/home-manager.nix`: `YOUR_USERNAME`
   - `platforms/darwin.nix`: `YOUR_USERNAME` (تظهر 3 مرات)
   - `hosts/my-macbook/configuration.nix`: `YOUR_USERNAME`

6. **ابنِ وبدّل**:
   ```bash
   darwin-rebuild switch --flake .#my-macbook
   ```

بعد الإعداد الأولي، استخدم الاسم المستعار `nix-switch` لإعادة بناء تهيئتك.

## التخصيص

- **إضافة أدوات سطر الأوامر (CLI)**: حرّر مصفوفة `packages` في `modules/home-manager.nix`
- **إضافة تطبيقات الواجهة الرسومية (GUI)**: حرّر مصفوفة `casks` في `modules/homebrew-common.nix`
- **إضافة أدوات التطوير**: أضِف `${pkgs.mise}/bin/mise use --global tool@version` إلى سكربت التفعيل في `modules/home-manager.nix`
- **تهيئة خاصة بكل جهاز**: استخدم `hosts/my-macbook/configuration.nix` للحزم والإعدادات الخاصة بالجهاز

---

**المستودع**: [github.com/bgub/nix-macos-starter](https://github.com/bgub/nix-macos-starter)