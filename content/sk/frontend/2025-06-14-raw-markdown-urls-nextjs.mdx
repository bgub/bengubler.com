---
title: "Pridanie .md URL pre surov√Ω markdownov√Ω obsah v Next.js"
description: "Ako prida≈• .md URL na svoj blog v Next.js na poskytovanie surov√©ho markdownov√©ho obsahu, in≈°pirovan√© dokument√°ciou od Vercel."
date: "2025-06-14"
tags: [frontend]
---

> **Aktualiz√°cia**: Po zverejnen√≠ tohto ƒçl√°nku [Guillermo Rauch](https://twitter.com/rauchg) (CEO Vercelu) navrhol pre tento pr√≠pad pou≈æi≈• rewrites v Next.js namiesto middleware. Implement√°ciu ni≈æ≈°ie som aktualizoval ‚Äì je jednoduch≈°ia a v√Ωkonnej≈°ia! üöÄ

## V skratke

In≈°pirovan√≠ dokument√°ciou od Vercelu prid√°me mo≈ænos≈• pripoji≈• k URL akejkoƒævek blogovej str√°nky pr√≠ponu `.md`, aby ste z√≠skali surov√Ω obsah v Markdowne. Teda `/posts/my-post` sa zmen√≠ na `/posts/my-post.md` pre surov√Ω zdroj. Ned√°vno som t√∫to funkciu pridal na svoj blog ‚Äì je ide√°lna na zdieƒæanie uk√°≈æok k√≥du alebo na to, aby ƒæudia videli, ako ste nieƒço nap√≠sali.

Next.js [rewrites](https://nextjs.org/docs/app/api-reference/config/next-config-js/rewrites) to prekvapivo jednoducho a elegantne umo≈æ≈àuj√∫.

<Tweet id="1930689104800518392" />

## Nastavenie

```bash
pnpx create-next-app@latest raw-markdown-blog
cd raw-markdown-blog
pnpm install @content-collections/core @content-collections/mdx @content-collections/next zod
```

Vyberte TypeScript, Tailwind CSS a App Router.

Pridajte `.content-collections` do svojho `.gitignore`:

```
.content-collections
```


## Nastavenie Content Collections

[Content Collections](https://www.content-collections.dev/) je v√Ωborn√° kni≈ænica na spr√°vu obsahu v Next.js ‚Äî je typovo bezpeƒçn√°, r√Ωchla a pon√∫ka skvel√Ω DX.

Vytvorte `content-collections.ts` v kore≈àovom adres√°ri projektu (nie v `src/`):

```typescript
import { defineCollection, defineConfig } from "@content-collections/core";
import { compileMDX } from "@content-collections/mdx";
import { z } from "zod";

const posts = defineCollection({
  name: "posts",
  directory: "content",
  include: "**/*.mdx",
  schema: z.object({
    title: z.string(),
    description: z.string(),
    date: z.string().pipe(z.coerce.date()),
  }),
  transform: async (document, context) => {
    const mdx = await compileMDX(context, document);
    const slug = document._meta.path.replace(/\.mdx$/, "");

    return {
      ...document,
      mdx,
      slug,
      url: `/posts/${slug}`,
    };
  },
});

export default defineConfig({
  collections: [posts],
});
```

Aktualizujte s√∫bor `next.config.js`:

```javascript
const { withContentCollections } = require("@content-collections/next");

/** @type {import('next').NextConfig} */
const nextConfig = {
  // va≈°a existuj√∫ca konfigur√°cia...
};

module.exports = withContentCollections(nextConfig);
```

Aktualizujte cesty v s√∫bore `tsconfig.json`:

```json
{
  "compilerOptions": {
    // ... ƒèal≈°ie mo≈ænosti
    "paths": {
      "@/*": ["./src/*"],
      "content-collections": ["./.content-collections/generated"]
    }
  }
}
```


## Uk√°≈ækov√Ω obsah

V kore≈àovom prieƒçinku projektu vytvorte adres√°r `content/` a pridajte `content/hello-world.mdx`:

````markdown
---
title: "Ahoj svet"
description: "M√¥j prv√Ω blogov√Ω pr√≠spevok s podporou raw markdown."
date: "2024-12-20"
---

## Vitajte

Toto je m√¥j prv√Ω blogov√Ω pr√≠spevok! Tu je nejak√Ω **tuƒçn√Ω text** a blok k√≥du:

```javascript
console.log("Ahoj, svet!");
```

Celkom fajn, nie?
````


## Str√°nky s pr√≠spevkami

Nahraƒète `app/page.tsx`:

```tsx
import { allPosts } from "content-collections";
import Link from "next/link";

export default function Home() {
  const sortedPosts = allPosts.sort(
    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
  );

  return (
    <div className="max-w-2xl mx-auto p-8">
      <h1 className="text-3xl font-bold mb-8">M√¥j blog</h1>
      <div className="space-y-6">
        {sortedPosts.map((post) => (
          <article key={post.slug} className="border-b pb-4">
            <Link
              href={post.url}
              className="text-xl font-semibold hover:text-blue-600"
            >
              {post.title}
            </Link>
            <p className="text-gray-600 mt-2">{post.description}</p>
            <time className="text-sm text-gray-500">
              {post.date.toLocaleDateString()}
            </time>
            <div className="mt-2 text-sm">
              <Link
                href={`${post.url}.md`}
                className="text-blue-500 hover:underline"
              >
                Zobrazi≈• zdrojov√Ω markdown
              </Link>
            </div>
          </article>
        ))}
      </div>
    </div>
  );
}
```

Vytvorte s√∫bor `app/posts/[slug]/page.tsx`:

```tsx
import { allPosts } from "content-collections";
import { MDXContent } from "@content-collections/mdx/react";
import { notFound } from "next/navigation";
import Link from "next/link";

export default async function PostPage({
  params,
}: {
  params: Promise<{ slug: string }>;
}) {
  const { slug } = await params;
  const post = allPosts.find((p) => p.slug === slug);

  if (!post) notFound();

  return (
    <div className="max-w-2xl mx-auto p-8">
      <Link
        href="/"
        className="text-blue-600 hover:underline mb-4 inline-block"
      >
        ‚Üê Sp√§≈• na pr√≠spevky
      </Link>

      <article>
        <header className="mb-8">
          <h1 className="text-3xl font-bold mb-2">{post.title}</h1>
          <p className="text-gray-600 mb-2">{post.description}</p>
          <time className="text-sm text-gray-500">
            {post.date.toLocaleDateString()}
          </time>
          <div className="mt-4">
            <Link
              href={`${post.url}.md`}
              className="text-blue-500 hover:underline text-sm"
            >
              Zobrazi≈• zdrojov√Ω markdown
            </Link>
          </div>
        </header>

        <div className="prose prose-lg max-w-none">
          <MDXContent code={post.mdx} />
        </div>
      </article>
    </div>
  );
}

export function generateStaticParams() {
  return allPosts.map((post) => ({ slug: post.slug }));
}
```


## K√∫zlo: prepisy

Tu sa prejav√≠ sila prep√≠san√≠ v Next.js ‚Äì prepisovanie URL vieme elegantne pokry≈• len p√°r riadkami konfigur√°cie.

Aktualizujte `next.config.js` a pridajte pravidlo prepisu:

```javascript
const { withContentCollections } = require("@content-collections/next");

/** @type {import('next').NextConfig} */
const nextConfig = {
  async rewrites() {
    return [
      {
        source: "/posts/:slug.md",
        destination: "/api/posts/:slug/raw",
      },
    ];
  },
};

module.exports = withContentCollections(nextConfig);
```

Pravidlo prepisu automaticky mapuje ka≈æd√∫ po≈æiadavku zodpovedaj√∫cu `/posts/:slug.md` na `/api/posts/:slug/raw`. Parameter `:slug` sa zachyt√≠ zo zdrojovej adresy URL a odo≈°le sa na cieƒæ. Pou≈æ√≠vateƒæ vid√≠ v prehliadaƒçi `/posts/hello-world.md`, ale Next.js ju obsluhuje z `/api/posts/hello-world/raw`.


## Trasa API pre neform√°tovan√Ω obsah

Vytvorte `app/api/posts/[slug]/raw/route.ts`:

```typescript
import { allPosts } from "content-collections";
import { NextRequest, NextResponse } from "next/server";

export async function GET(
  request: NextRequest,
  { params }: { params: Promise<{ slug: string }> }
) {
  const { slug } = await params;
  const post = allPosts.find((p) => p.slug === slug);

  if (!post) {
    return new NextResponse("Pr√≠spevok nen√°jden√Ω", { status: 404 });
  }

  return new NextResponse(post.content, {
    headers: {
      "Content-Type": "text/markdown; charset=utf-8",
      "Cache-Control": "public, max-age=3600", // Cache na 1 hodinu
    },
  });
}

export function generateStaticParams() {
  return allPosts.map((post) => ({ slug: post.slug }));
}
```


## Hotovo

Spustite svoj dev server a otestujte obe adresy URL:

- `/posts/hello-world` - Vykreslen√© MDX so ≈°t√Ωlmi a komponentmi
- `/posts/hello-world.md` - Surov√Ω zdrojov√Ω markdown

Hlaviƒçky cache zabezpeƒçia, ≈æe surov√Ω markdown sa bude hodinu uklada≈• do vyrovn√°vacej pam√§te, ƒço zni≈æuje z√°≈•a≈æ servera pri popul√°rnych pr√≠spevkoch. V produkcii mo≈æno budete chcie≈• prida≈• k pr√≠spevkom tlaƒçidlo ‚ÄûZobrazi≈• raw‚Äú (ako som to spravil na svojom blogu) namiesto toho, aby ste v zozname pr√≠spevkov zobrazovali len odkaz.

T√°to funkcionalita je ide√°lna na zdieƒæanie pr√≠kladov, ladenie obsahu alebo na to, aby si ostatn√≠ mohli ≈°tudova≈• va≈°e markdownov√© form√°tovanie. A prep√≠sania v Next.js robia implement√°ciu ƒçist√∫ a v√Ωkonn√∫ ‚Äì nie je potrebn√° ≈æiadna zlo≈æit√° logika smerovania.